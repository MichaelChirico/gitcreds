<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>gitcreds for package authors • gitcreds</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="gitcreds for package authors">
<meta property="og:description" content="gitcreds">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">gitcreds</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="Unreleased version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/helper-survey.html">git credential helpers</a>
    </li>
    <li>
      <a href="../articles/package.html">gitcreds for package authors</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/gaborcsardi/gitcreds/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="package_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>gitcreds for package authors</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/gaborcsardi/gitcreds/blob/master/vignettes/package.Rmd"><code>vignettes/package.Rmd</code></a></small>
      <div class="hidden name"><code>package.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>If you have a package that queries the GitHub API, or uses git with remote git repositories, then most likely you need to let your users specify their GitHub or git credentials. There are several benefits of using gitcreds to do this:</p>
<ul>
<li><p>(Re)use the same credentials as command line git, R and the RStudio IDE., etc. Users can set their GitHub token once and use it everywhere.</p></li>
<li><p>Users can use the same credentials for multiple R packages.</p></li>
<li><p>gitcreds has a cache that makes credential lookup very fast.</p></li>
<li><p>Typically more secure than storing passwords and tokens in <code>.Renviron</code> files.</p></li>
<li><p>gitcreads supports multiple users and multiple hosts.</p></li>
<li><p>If git or credential helpers are not available, e.g. on typically on a Linux server, then gitcreds can still use environment variables, and it still supports multiple users and hosts.</p></li>
</ul>
</div>
<div id="the-simple-api" class="section level2">
<h2 class="hasAnchor">
<a href="#the-simple-api" class="anchor"></a>The simple API</h2>
<p>The simplest way to use gitcreds is to call <code><a href="../reference/gitcreds_get.html">gitcreds_get()</a></code> from your package to query credentials, possibly with a custom URL. For setting new credentials, you can point your users to <code><a href="../reference/gitcreds_get.html">gitcreds_set()</a></code>.</p>
<div id="errors-from-the-simple-api" class="section level3">
<h3 class="hasAnchor">
<a href="#errors-from-the-simple-api" class="anchor"></a>Errors from the simple API</h3>
<p>If you are using the simple API, gitcreds may throw the following classed errors and your package might want to handle:</p>
<ul>
<li><p><code>gitcreds_nogit_error</code> if git it not available on the system.</p></li>
<li><p><code>gitcreds_no_credentials</code> if git did not find any credentials for the specified URL. The URL is stored in the error, under <code>url</code>.</p></li>
<li>
<p><code>git_error</code> if a git command returned some error. The following information is stored in the error object:</p>
<ul>
<li><p><code>args</code> the command line arguments to git,</p></li>
<li><p><code>stdout</code> standard output,</p></li>
<li><p><code>stderr</code> standard error,</p></li>
<li><p><code>status</code> the exit status of the git process.</p></li>
</ul>
</li>
<li><p><code>gitcreds_not_interactive_error</code> if <code><a href="../reference/gitcreds_get.html">gitcreds_set()</a></code> is called in non-interactive mode.</p></li>
<li><p><code>gitcreds_abort_replace_error</code> if the user aborted replacing the existing credentials.</p></li>
</ul>
</div>
</div>
<div id="the-low-level-api" class="section level2">
<h2 class="hasAnchor">
<a href="#the-low-level-api" class="anchor"></a>The low level API</h2>
<p>Should you need more flexibility, you can use the <code><a href="../reference/gitcreds_fill.html">gitcreds_approve()</a></code>, <code><a href="../reference/gitcreds_fill.html">gitcreds_fill()</a></code> and <code><a href="../reference/gitcreds_fill.html">gitcreds_reject()</a></code> functions, to add/update, query and remove credentials. We suggest you use the dummy credential helper (see below) for <code><a href="../reference/gitcreds_fill.html">gitcreds_fill()</a></code>, to avoid git password dialog boxes if a credential is not available.</p>
<p>E.g. the low level API makes it possible to implement an alternative to <code><a href="../reference/gitcreds_get.html">gitcreds_set()</a></code> , with a different user interface, or a version that also works in non-interactive sessions.</p>
<div id="the-dummy-credential-helper" class="section level3">
<h3 class="hasAnchor">
<a href="#the-dummy-credential-helper" class="anchor"></a>The dummy credential helper</h3>
<p>In a typical setup, if git does not find credentials for the requested host after querying all defined credential helpers, it’ll ask for a password in a dialog box, or a terminal prompt. It is often best to avoid these, and deal with the situation within R.</p>
<p>gitcreds has a dummy credential helper, that always supplies dummy credentials. By default <code><a href="../reference/gitcreds_fill.html">gitcreds_fill()</a></code> adds this dummy helper to the list of configured credential helpers, and code calling <code><a href="../reference/gitcreds_fill.html">gitcreds_fill()</a></code> can check if git returned the dummy credentials, meaning that no real credentials were found. This is how the dummy credentials look:</p>
<div class="sourceCode" id="cb1"><pre class="downlit">
<span class="fu"><a href="../reference/gitcreds_fill.html">gitcreds_fill</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(url=<span class="st">"https://impossible.com"</span>))
<span class="co">#&gt; [1] "protocol=dummy"     "host=dummy"</span>
<span class="co">#&gt; [3] "username=dummy"     "password=dummy get"</span>
</pre></div>
<p>It is best to look for <code>protocol=dummy</code> as the first line of the git output.</p>
</div>
<div id="errors-from-the-low-level-api" class="section level3">
<h3 class="hasAnchor">
<a href="#errors-from-the-low-level-api" class="anchor"></a>Errors from the low level API</h3>
<ul>
<li>
<p><code>git_error</code> if a git command returned some error. The following information is stored in the error object:</p>
<ul>
<li><p><code>args</code> the command line arguments to git,</p></li>
<li><p><code>stdout</code> standard output,</p></li>
<li><p><code>stderr</code> standard error,</p></li>
<li><p><code>status</code> the exit status of the git process.</p></li>
</ul>
</li>
</ul>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Gabor Csardi.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.0.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
